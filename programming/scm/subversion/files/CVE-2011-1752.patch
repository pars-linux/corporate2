Description: fix denial of service via baselined WebDAV resource request
Origin: upstream, http://svn.apache.org/viewvc?view=revision&revision=1098608

diff -Nur subversion-1.6.12dfsg/subversion/mod_dav_svn/repos.c subversion-1.6.12dfsg.new/subversion/mod_dav_svn/repos.c
--- subversion-1.6.12dfsg/subversion/mod_dav_svn/repos.c	2011-06-02 13:14:09.754514143 -0400
+++ subversion-1.6.12dfsg.new/subversion/mod_dav_svn/repos.c	2011-06-02 13:14:21.174514140 -0400
@@ -2827,10 +2827,11 @@
   apr_status_t status;
 
   /* Check resource type */
-  if (resource->type != DAV_RESOURCE_TYPE_REGULAR
-      && resource->type != DAV_RESOURCE_TYPE_VERSION
-      && resource->type != DAV_RESOURCE_TYPE_WORKING
-      && resource->info->restype != DAV_SVN_RESTYPE_PARENTPATH_COLLECTION)
+  if (resource->baselined
+      || (resource->type != DAV_RESOURCE_TYPE_REGULAR
+          && resource->type != DAV_RESOURCE_TYPE_VERSION
+          && resource->type != DAV_RESOURCE_TYPE_WORKING
+          && resource->info->restype != DAV_SVN_RESTYPE_PARENTPATH_COLLECTION))
     {
       return dav_new_error(resource->pool, HTTP_CONFLICT, 0,
                            "Cannot GET this type of resource.");
