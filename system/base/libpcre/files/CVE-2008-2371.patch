--- pcre_compile.c.orig	2008-07-05 16:55:32.000000000 +0300
+++ pcre_compile.c	2008-07-05 16:56:26.000000000 +0300
@@ -4831,7 +4831,7 @@
                (lengthptr == NULL || *lengthptr == 2 + 2*LINK_SIZE))
             {
             cd->external_options = newoptions;
-            options = newoptions;
+            options = *optionsptr = newoptions;
             }
          else
             {
